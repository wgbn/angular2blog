System.register(["angular2/core","../models","../service/login","angular2/router","../service/post"],function(t,e){"use strict";var o,r,n,i,s,c,u=(e&&e.id,this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(s=(i<3?n(s):i>3?n(e,o,s):n(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s}),a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};return{setters:[function(t){o=t},function(t){r=t},function(t){n=t},function(t){i=t},function(t){s=t}],execute:function(){c=function(){function t(t,e,o){this._loginService=t,this._router=e,this._postService=o,this.post=new r.Post,this.errorMessage=null,this.showLoading=!1,t.isLogged()||this._router.navigate(["Login"]),this.post.user=this._loginService.getUser()}return t.prototype.onClick=function(t){var e=this;t.preventDefault(),this.showLoading=!0,this.errorMessage=null,this._postService.insert(this.post).subscribe(function(t){return e.onInsertPostResult(t)},function(t){return e.onInsertPostError(t)})},t.prototype.onInsertPostResult=function(t){this._router.navigate(["Home"])},t.prototype.onInsertPostError=function(t){this.showLoading=!1,this.errorMessage=t._body},t=u([o.Component({providers:[s.PostService],templateUrl:"addpostComponent.html"}),a("design:paramtypes",[n.LoginService,i.Router,s.PostService])],t)}(),t("AddPostComponent",c)}}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudC9hZGRwb3N0LmpzIl0sIm5hbWVzIjpbIlN5c3RlbSIsInJlZ2lzdGVyIiwiZXhwb3J0c18xIiwiY29udGV4dF8xIiwiY29yZV8xIiwibW9kZWxzXzEiLCJsb2dpbl8xIiwicm91dGVyXzEiLCJwb3N0XzEiLCJBZGRQb3N0Q29tcG9uZW50IiwiX19kZWNvcmF0ZSIsImlkIiwidGhpcyIsImRlY29yYXRvcnMiLCJ0YXJnZXQiLCJrZXkiLCJkZXNjIiwiZCIsImMiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJyIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiUmVmbGVjdCIsImRlY29yYXRlIiwiaSIsImRlZmluZVByb3BlcnR5IiwiX19tZXRhZGF0YSIsImsiLCJ2IiwibWV0YWRhdGEiLCJzZXR0ZXJzIiwiY29yZV8xXzEiLCJtb2RlbHNfMV8xIiwibG9naW5fMV8xIiwicm91dGVyXzFfMSIsInBvc3RfMV8xIiwiZXhlY3V0ZSIsIl9sb2dpblNlcnZpY2UiLCJfcm91dGVyIiwiX3Bvc3RTZXJ2aWNlIiwicG9zdCIsIlBvc3QiLCJlcnJvck1lc3NhZ2UiLCJzaG93TG9hZGluZyIsImlzTG9nZ2VkIiwibmF2aWdhdGUiLCJ1c2VyIiwiZ2V0VXNlciIsInByb3RvdHlwZSIsIm9uQ2xpY2siLCJldmVudCIsIl90aGlzIiwicHJldmVudERlZmF1bHQiLCJpbnNlcnQiLCJzdWJzY3JpYmUiLCJyZXN1bHQiLCJvbkluc2VydFBvc3RSZXN1bHQiLCJlcnJvciIsIm9uSW5zZXJ0UG9zdEVycm9yIiwiX2JvZHkiLCJDb21wb25lbnQiLCJwcm92aWRlcnMiLCJQb3N0U2VydmljZSIsInRlbXBsYXRlVXJsIiwiTG9naW5TZXJ2aWNlIiwiUm91dGVyIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0MsVUFBVSxnQkFBaUIsWUFBYSxtQkFBb0Isa0JBQW1CLG1CQUFvQixTQUFTQyxFQUFXQyxHQUMxSCxZQUNBLElBVUlDLEdBQVFDLEVBQVVDLEVBQVNDLEVBQVVDLEVBQ3JDQyxFQVZBQyxHQURlUCxHQUFhQSxFQUFVUSxHQUN4QkMsTUFBUUEsS0FBS0YsWUFBZSxTQUFVRyxFQUFZQyxFQUFRQyxFQUFLQyxHQUM3RSxHQUEySEMsR0FBdkhDLEVBQUlDLFVBQVVDLE9BQVFDLEVBQUlILEVBQUksRUFBSUosRUFBa0IsT0FBVEUsRUFBZ0JBLEVBQU9NLE9BQU9DLHlCQUF5QlQsRUFBUUMsR0FBT0MsQ0FDckgsSUFBdUIsZ0JBQVpRLFVBQW9ELGtCQUFyQkEsU0FBUUMsU0FBeUJKLEVBQUlHLFFBQVFDLFNBQVNaLEVBQVlDLEVBQVFDLEVBQUtDLE9BQ3BILEtBQUssR0FBSVUsR0FBSWIsRUFBV08sT0FBUyxFQUFHTSxHQUFLLEVBQUdBLEtBQVNULEVBQUlKLEVBQVdhLE1BQUlMLEdBQUtILEVBQUksRUFBSUQsRUFBRUksR0FBS0gsRUFBSSxFQUFJRCxFQUFFSCxFQUFRQyxFQUFLTSxHQUFLSixFQUFFSCxFQUFRQyxLQUFTTSxFQUNoSixPQUFPSCxHQUFJLEdBQUtHLEdBQUtDLE9BQU9LLGVBQWViLEVBQVFDLEVBQUtNLEdBQUlBLElBRTVETyxFQUFjaEIsTUFBUUEsS0FBS2dCLFlBQWUsU0FBVUMsRUFBR0MsR0FDdkQsR0FBdUIsZ0JBQVpOLFVBQW9ELGtCQUFyQkEsU0FBUU8sU0FBeUIsTUFBT1AsU0FBUU8sU0FBU0YsRUFBR0MsR0FJMUcsUUFDSUUsU0FDSSxTQUFVQyxHQUNON0IsRUFBUzZCLEdBRWIsU0FBVUMsR0FDTjdCLEVBQVc2QixHQUVmLFNBQVVDLEdBQ043QixFQUFVNkIsR0FFZCxTQUFVQyxHQUNON0IsRUFBVzZCLEdBRWYsU0FBVUMsR0FDTjdCLEVBQVM2QixJQUVqQkMsUUFBUyxXQUNMN0IsRUFBb0IsV0FDaEIsUUFBU0EsR0FBaUI4QixFQUFlQyxFQUFTQyxHQUM5QzdCLEtBQUsyQixjQUFnQkEsRUFDckIzQixLQUFLNEIsUUFBVUEsRUFDZjVCLEtBQUs2QixhQUFlQSxFQUNwQjdCLEtBQUs4QixLQUFPLEdBQUlyQyxHQUFTc0MsS0FDekIvQixLQUFLZ0MsYUFBZSxLQUNwQmhDLEtBQUtpQyxhQUFjLEVBQ2ROLEVBQWNPLFlBQ2ZsQyxLQUFLNEIsUUFBUU8sVUFBVSxVQUMzQm5DLEtBQUs4QixLQUFLTSxLQUFPcEMsS0FBSzJCLGNBQWNVLFVBdUJ4QyxNQXJCQXhDLEdBQWlCeUMsVUFBVUMsUUFBVSxTQUFVQyxHQUMzQyxHQUFJQyxHQUFRekMsSUFDWndDLEdBQU1FLGlCQUNOMUMsS0FBS2lDLGFBQWMsRUFDbkJqQyxLQUFLZ0MsYUFBZSxLQUNwQmhDLEtBQUs2QixhQUFhYyxPQUFPM0MsS0FBSzhCLE1BQU1jLFVBQVUsU0FBVUMsR0FBVSxNQUFPSixHQUFNSyxtQkFBbUJELElBQVksU0FBVUUsR0FBUyxNQUFPTixHQUFNTyxrQkFBa0JELE1BRXBLbEQsRUFBaUJ5QyxVQUFVUSxtQkFBcUIsU0FBVUQsR0FDdEQ3QyxLQUFLNEIsUUFBUU8sVUFBVSxVQUUzQnRDLEVBQWlCeUMsVUFBVVUsa0JBQW9CLFNBQVVELEdBQ3JEL0MsS0FBS2lDLGFBQWMsRUFDbkJqQyxLQUFLZ0MsYUFBZWUsRUFBTUUsT0FFOUJwRCxFQUFtQkMsR0FDZk4sRUFBTzBELFdBQ0hDLFdBQVl2RCxFQUFPd0QsYUFDbkJDLFlBQWEsMEJBRWpCckMsRUFBVyxxQkFBc0J0QixFQUFRNEQsYUFBYzNELEVBQVM0RCxPQUFRM0QsRUFBT3dELGVBQ2hGdkQsTUFHUFAsRUFBVSxtQkFBb0JPIiwiZmlsZSI6ImNvbXBvbmVudC9hZGRwb3N0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiU3lzdGVtLnJlZ2lzdGVyKFsnYW5ndWxhcjIvY29yZScsICcuLi9tb2RlbHMnLCAnLi4vc2VydmljZS9sb2dpbicsICdhbmd1bGFyMi9yb3V0ZXInLCAnLi4vc2VydmljZS9wb3N0J10sIGZ1bmN0aW9uKGV4cG9ydHNfMSwgY29udGV4dF8xKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIF9fbW9kdWxlTmFtZSA9IGNvbnRleHRfMSAmJiBjb250ZXh0XzEuaWQ7XG4gICAgdmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgICAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgICAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgICAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgICAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xuICAgIH07XG4gICAgdmFyIF9fbWV0YWRhdGEgPSAodGhpcyAmJiB0aGlzLl9fbWV0YWRhdGEpIHx8IGZ1bmN0aW9uIChrLCB2KSB7XG4gICAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShrLCB2KTtcbiAgICB9O1xuICAgIHZhciBjb3JlXzEsIG1vZGVsc18xLCBsb2dpbl8xLCByb3V0ZXJfMSwgcG9zdF8xO1xuICAgIHZhciBBZGRQb3N0Q29tcG9uZW50O1xuICAgIHJldHVybiB7XG4gICAgICAgIHNldHRlcnM6W1xuICAgICAgICAgICAgZnVuY3Rpb24gKGNvcmVfMV8xKSB7XG4gICAgICAgICAgICAgICAgY29yZV8xID0gY29yZV8xXzE7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKG1vZGVsc18xXzEpIHtcbiAgICAgICAgICAgICAgICBtb2RlbHNfMSA9IG1vZGVsc18xXzE7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKGxvZ2luXzFfMSkge1xuICAgICAgICAgICAgICAgIGxvZ2luXzEgPSBsb2dpbl8xXzE7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKHJvdXRlcl8xXzEpIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJfMSA9IHJvdXRlcl8xXzE7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKHBvc3RfMV8xKSB7XG4gICAgICAgICAgICAgICAgcG9zdF8xID0gcG9zdF8xXzE7XG4gICAgICAgICAgICB9XSxcbiAgICAgICAgZXhlY3V0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBBZGRQb3N0Q29tcG9uZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBBZGRQb3N0Q29tcG9uZW50KF9sb2dpblNlcnZpY2UsIF9yb3V0ZXIsIF9wb3N0U2VydmljZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb2dpblNlcnZpY2UgPSBfbG9naW5TZXJ2aWNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yb3V0ZXIgPSBfcm91dGVyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3N0U2VydmljZSA9IF9wb3N0U2VydmljZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0ID0gbmV3IG1vZGVsc18xLlBvc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2xvZ2luU2VydmljZS5pc0xvZ2dlZCgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnTG9naW4nXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdC51c2VyID0gdGhpcy5fbG9naW5TZXJ2aWNlLmdldFVzZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgQWRkUG9zdENvbXBvbmVudC5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3N0U2VydmljZS5pbnNlcnQodGhpcy5wb3N0KS5zdWJzY3JpYmUoZnVuY3Rpb24gKHJlc3VsdCkgeyByZXR1cm4gX3RoaXMub25JbnNlcnRQb3N0UmVzdWx0KHJlc3VsdCk7IH0sIGZ1bmN0aW9uIChlcnJvcikgeyByZXR1cm4gX3RoaXMub25JbnNlcnRQb3N0RXJyb3IoZXJyb3IpOyB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIEFkZFBvc3RDb21wb25lbnQucHJvdG90eXBlLm9uSW5zZXJ0UG9zdFJlc3VsdCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcm91dGVyLm5hdmlnYXRlKFsnSG9tZSddKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIEFkZFBvc3RDb21wb25lbnQucHJvdG90eXBlLm9uSW5zZXJ0UG9zdEVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSBlcnJvci5fYm9keTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIEFkZFBvc3RDb21wb25lbnQgPSBfX2RlY29yYXRlKFtcbiAgICAgICAgICAgICAgICAgICAgY29yZV8xLkNvbXBvbmVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtwb3N0XzEuUG9zdFNlcnZpY2VdLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhZGRwb3N0Q29tcG9uZW50Lmh0bWwnXG4gICAgICAgICAgICAgICAgICAgIH0pLCBcbiAgICAgICAgICAgICAgICAgICAgX19tZXRhZGF0YSgnZGVzaWduOnBhcmFtdHlwZXMnLCBbbG9naW5fMS5Mb2dpblNlcnZpY2UsIHJvdXRlcl8xLlJvdXRlciwgcG9zdF8xLlBvc3RTZXJ2aWNlXSlcbiAgICAgICAgICAgICAgICBdLCBBZGRQb3N0Q29tcG9uZW50KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gQWRkUG9zdENvbXBvbmVudDtcbiAgICAgICAgICAgIH0oKSk7XG4gICAgICAgICAgICBleHBvcnRzXzEoXCJBZGRQb3N0Q29tcG9uZW50XCIsIEFkZFBvc3RDb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
